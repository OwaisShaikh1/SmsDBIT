{% load static %}
<div class="sidebar">
  <div class="sidebar-header text-center mb-3">
    <h4>ğŸ“± SMS Portal</h4>
    <div class="small text-light opacity-75">
      {{ request.user.username|capfirst }} â€¢ {{ request.user.role|capfirst }}
    </div>
  </div>

  <!-- Navigation -->
  <nav class="sidebar-nav flex-grow-1">
    <a href="/dashboard/" class="nav-item {% if request.path == '/dashboard/' %}active{% endif %}">ğŸ  Dashboard</a>
    <a href="/send/" class="nav-item {% if request.path == '/send/' %}active{% endif %}">âœ‰ï¸ Send SMS</a>
    <a href="/history/" class="nav-item {% if request.path == '/history/' %}active{% endif %}">ğŸ“œ Message History</a>
    <a href="/templates/" class="nav-item {% if request.path == '/templates/' %}active{% endif %}">ğŸ§© Templates</a>

    {% if request.user.role == "admin" %}
      <a href="/users/" class="nav-item {% if request.path == '/users/' %}active{% endif %}">ğŸ‘¥ Manage Users</a>
      <a href="/groups/" class="nav-item {% if request.path == '/groups/' %}active{% endif %}">ğŸ“š Groups</a>
      <a href="/reports/" class="nav-item {% if request.path == '/reports/' %}active{% endif %}">ğŸ“Š Reports</a>
      <a href="/approvals/" class="nav-item {% if request.path == '/approvals/' %}active{% endif %}">âœ… Template Approvals</a>
      <a href="/activity/" class="nav-item {% if request.path == '/activity/' %}active{% endif %}">ğŸ“ Activity Log</a>
    {% else %}
      <a href="/groups/" class="nav-item {% if request.path == '/groups/' %}active{% endif %}">ğŸ‘¥ My Groups</a>
      <a href="/contacts/" class="nav-item {% if request.path == '/contacts/' %}active{% endif %}">ğŸ“‡ Contacts</a>
      <a href="/reports/" class="nav-item {% if request.path == '/reports/' %}active{% endif %}">ğŸ“ˆ Reports</a>
    {% endif %}

    <hr>

    <a href="/sender-ids/" class="nav-item {% if request.path == '/sender-ids/' %}active{% endif %}">ğŸªª Sender IDs</a>
    <a href="/settings/" class="nav-item {% if request.path == '/settings/' %}active{% endif %}">âš™ï¸ Settings</a>
  </nav>

  <hr>

  <!-- Footer actions -->
  <div class="sidebar-footer mt-auto text-center">
    <a href="/profile/" class="nav-item d-block mb-2 {% if request.path == '/profile/' %}active{% endif %}">ğŸ‘¤ Profile</a>

    <!-- Safe Django logout form -->
    <form action="/logout/" method="post" style="display:inline;">
      {% csrf_token %}
      <button type="submit" class="btn btn-link text-white text-decoration-none p-0">ğŸšª Logout</button>
    </form>

    <div class="footer mt-3 text-white-50 small">
      Â© {{ now|date:"Y" }} SMS Portal
    </div>
  </div>
</div>

<style>
  .sidebar {
    height: 100vh;
    background-color: #1e3a8a;
    color: white;
    display: flex;
    flex-direction: column;
    font-family: "Inter", sans-serif;
  }

  .sidebar-header h4 {
    margin-top: 15px;
    font-weight: 700;
    color: #fff;
  }

  .sidebar-nav {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    padding: 0 10px;
  }

  .sidebar-nav .nav-item {
    color: white;
    text-decoration: none;
    display: block;
    padding: 10px 15px;
    border-radius: 8px;
    margin: 2px 5px;
    transition: background 0.25s;
    font-size: 0.95rem;
  }

  .sidebar-nav .nav-item:hover {
    background-color: #3b82f6;
    text-decoration: none;
  }

  .sidebar-nav .nav-item.active {
    background-color: #2563eb;
  }

  .sidebar hr {
    border-color: rgba(255, 255, 255, 0.2);
    margin: 10px 15px;
  }

  .sidebar-footer {
    padding: 10px;
  }

  .sidebar-footer button {
    background: none;
    border: none;
    color: white;
    font-size: 0.95rem;
    cursor: pointer;
  }

  .sidebar-footer button:hover {
    text-decoration: underline;
  }
</style>
